@page "/account/manage/users"
@model NuGetFeedTemplate.Pages.Account.UsersModel
@{
}

<div class="page-account-settings row">
  <div class="col-sm-12 col-md12">
    <h1 role="list" class="ms-font-xl breadcrumb-title">
      <span role="listitem" class="ms-noWrap"><i class="ms-Icon ms-Icon--Contact ms-font-l" aria-hidden="true"></i></span>
      <i class="ms-Icon ms-Icon--ChevronRight ms-font-m" aria-hidden="true"></i>
      <span role="listitem" class="ms-noWrap">Users</span>
    </h1>
    <hr class="breadcrumb-divider">
    <p class="lead">Manage site users package access. Users who have Admin access can push packages, manage package groups, add package sources, and manage other users.</p>
  </div>
</div>

<div class="panel panel-default panel-collapse in" aria-expanded="true">
  <div class="panel-body">
    @foreach(var user in Model.Users)
    {
      <div class="row">
        <div class="col-md-2">
          <img src="/profile/icon?email=@user.Email&size=100" class="img img-responsive img-circle" />
        </div>
        <div class="col-md-7">
          <h4>@user.Name</h4>
          <h5>@user.Email</h5>
        </div>
        <div class="col-md-3">
          <div class="row">
            <div class="col-12">
              <strong>Admin</strong>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <form method="post" class="form-inline">
                <input type="hidden" name="Email" value="@user.Email" />
                <input type="hidden" name="PackagePublisher" value="@((!user.PackagePublisher).ToString())" />
                @if(user.PackagePublisher)
                {
                  <button type="submit" class="btn btn-primary">Remove Access</button>
                }
                else
                {
                   <button type="submit" class="btn btn-primary">Make Admin</button>
                }
              </form>
            </div>
          </div>
        </div>
      </div>
    }
  </div>
</div>
